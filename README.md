# NotoSansã¸ç½®æ›ã™ã‚‹ã‚„ã¤(æ”¹ä¿®å‹)

[![Version](https://img.shields.io/badge/version-2.0.21-blue.svg)](https://github.com/1llum1n4t1s/replace-font)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

èª­ã¿ã¥ã‚‰ã„æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã‚’è‡ªå‹•çš„ã« **Noto Sans** ã«ç½®æ›ã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–æ¸ˆã¿ã€‚

## ğŸ¯ ç‰¹å¾´

- âš¡ **é«˜é€Ÿå‡¦ç†**: æœ€é©åŒ–ã•ã‚ŒãŸãƒ•ã‚©ãƒ³ãƒˆãƒ—ãƒªãƒ­ãƒ¼ãƒ‰æ©Ÿæ§‹
- ğŸ”„ **è‡ªå‹•æ¤œå‡º**: è¤‡æ•°ã®æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã‚’è‡ªå‹•ã§æ¤œå‡ºãƒ»ç½®æ›
- ğŸ–¼ï¸ **iframeå¯¾å¿œ**: å‹•çš„ã«è¿½åŠ ã•ã‚Œã‚‹iframeå†…ã®ãƒ•ã‚©ãƒ³ãƒˆã‚‚ç½®æ›
- ğŸ¨ **ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³**: SVGã‹ã‚‰è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ã‚¢ã‚¤ã‚³ãƒ³
- ğŸš€ **Manifest V3**: æœ€æ–°ã®Chromeæ‹¡å¼µä»•æ§˜ã«å¯¾å¿œ
- ğŸ’¾ **è»½é‡**: ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚©ãƒ³ãƒˆãŒãªã„å ´åˆã¯æ‹¡å¼µæ©Ÿèƒ½å†…è”µãƒ•ã‚©ãƒ³ãƒˆ(Noto Sans JP)ã‚’èª­ã¿è¾¼ã‚€

## ğŸ“¥ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### Chrome
https://chromewebstore.google.com/detail/ipfbjlmjgfobhnncbggaaiknhdgkcdfe

## ğŸ”¤ ç½®æ›å¯¾è±¡ãƒ•ã‚©ãƒ³ãƒˆ

ä»¥ä¸‹ã®**45å€‹ä»¥ä¸Šã®ãƒ•ã‚©ãƒ³ãƒˆ**ãŒ **Noto Sans JP** ã«è‡ªå‹•ç½®æ›ã•ã‚Œã¾ã™ï¼š

### Microsoftãƒ•ã‚©ãƒ³ãƒˆ
- **MS Gothic** / MS ã‚´ã‚·ãƒƒã‚¯ / ï¼­ï¼³ ã‚´ã‚·ãƒƒã‚¯
- **MS PGothic** / MS Pã‚´ã‚·ãƒƒã‚¯ / ï¼­ï¼³ ï¼°ã‚´ã‚·ãƒƒã‚¯
- **MS UI Gothic**
- **Meiryo** / ãƒ¡ã‚¤ãƒªã‚ª
- **Meiryo UI**

### Adobeãƒ•ã‚©ãƒ³ãƒˆ
- **Yu Gothic** / æ¸¸ã‚´ã‚·ãƒƒã‚¯ / YuGothic (W1ã€œW9ã®ã‚¦ã‚§ã‚¤ãƒˆæŒ‡å®š)
- **Yu Gothic Medium** / æ¸¸ã‚´ã‚·ãƒƒã‚¯ Medium
- **Yu Gothic UI**

### ãƒ’ãƒ©ã‚®ãƒã‚·ãƒªãƒ¼ã‚º
- **Hiragino Kaku Gothic Pro** / ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro (W1ã€œW9ã®ã‚¦ã‚§ã‚¤ãƒˆæŒ‡å®š)
- **Hiragino Kaku Gothic ProN** / ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ ProN (W1ã€œW9ã®ã‚¦ã‚§ã‚¤ãƒˆæŒ‡å®š)
- **Hiragino Sans** / ãƒ’ãƒ©ã‚®ãƒ sans
- **Hiragino Sans Pro**

### ãã®ä»–ãƒ•ã‚©ãƒ³ãƒˆ
- **M PLUS Rounded 1c**
- **Malgun Gothic**
- **Arial** / **ArialMT** / **Arial Unicode MS**
- **Roboto** / **RobotoDraft**
- **Helvetica**
- **Segoe UI**
- **Inter**

**ã‚¦ã‚§ã‚¤ãƒˆå¯¾å¿œ**: Regular (400) ã¨ Bold (700)

## ğŸ”§ å®Ÿè£…ã®è©³ç´°

### ã‚³ã‚¢ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼

#### ãƒ•ã‚©ãƒ³ãƒˆé…ä¿¡
- **preload-fonts.js**: Manifest V3å¯¾å¿œã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  - `document_start`ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§é«˜é€Ÿå®Ÿè¡Œ
  - CSS Font Loading APIã‚’ä½¿ç”¨ã—ãŸåŠ¹ç‡çš„ãªãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿
  - è¤‡æ•°ã‚¦ã‚§ã‚¤ãƒˆã®å‹•çš„ç®¡ç†

#### CSSç”Ÿæˆ
- **generate-css.js**: è‡ªå‹•CSSç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
  - 45å€‹ä»¥ä¸Šã®ãƒ•ã‚©ãƒ³ãƒˆå®šç¾©ã‚’è‡ªå‹•ç”Ÿæˆ
  - ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ã®W1ã€œW9ã‚¦ã‚§ã‚¤ãƒˆæŒ‡å®šã‚’å‹•çš„ã«ç”Ÿæˆ
  - ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚©ãƒ³ãƒˆå€™è£œï¼ˆNoto Sans JPã€Noto Sans CJKï¼‰ã‚’ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- **WeakSet**: é‡è¤‡å‡¦ç†ã‚’é˜²æ­¢ï¼ˆiframeå‡¦ç†ï¼‰
- **DocumentFragment**: DOMæ“ä½œã®ãƒãƒƒãƒåŒ–
- **Debounce**: è¤‡æ•°iframeåŒæ™‚è¿½åŠ æ™‚ã®åŠ¹ç‡åŒ–ï¼ˆ100msï¼‰
- **requestIdleCallback**: ãƒ–ãƒ©ã‚¦ã‚¶ä½™è£•æ™‚ã®ãƒªã‚½ãƒ¼ã‚¹è§£æ”¾

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
manifest.json
â”œâ”€â”€ Content Script (preload-fonts.js)
â”‚   â”œâ”€â”€ CSSæ³¨å…¥ (iframeç”¨)
â”‚   â”œâ”€â”€ preloadã‚¿ã‚°ç”Ÿæˆ
â”‚   â””â”€â”€ CSS Font Loading API
â”œâ”€â”€ é™çš„CSS (manifest.json)
â”‚   â”œâ”€â”€ replacefont-extension-regular.css
â”‚   â””â”€â”€ replacefont-extension-bold.css
â””â”€â”€ ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆ (generate-icons.js)
    â””â”€â”€ SVG â†’ PNG (16x16, 48x48, 128x128)
```

### ç½®ãæ›ãˆä»•çµ„ã¿

1. **@font-faceå®šç¾©**ã§æŒ‡å®šãƒ•ã‚©ãƒ³ãƒˆåã‚’Noto Sans JPã«å†å®šç¾©
2. **CSS Font Loading API**ã§æ˜ç¤ºçš„ã«ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿
3. **è¤‡æ•°ã‚¦ã‚§ã‚¤ãƒˆå¯¾å¿œ**ã§ç´°å­—ãƒ»å¤ªå­—ã‚’å€‹åˆ¥ç®¡ç†
4. **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚©ãƒ³ãƒˆå„ªå…ˆ**ã§é«˜é€ŸåŒ–ï¼ˆOSã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç‰ˆã‚ã‚Œã°ä½¿ç”¨ï¼‰

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [MIT License](LICENSE) ã®ä¸‹ã§ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ãƒ•ã‚©ãƒ³ãƒˆãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Noto Sans JP ã¯ [SIL Open Font License 1.1](fonts/LICENSE) ã®ä¸‹ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚


## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

Issueå ±å‘Šã‚„Pull Requestã‚’æ­“è¿ã—ã¾ã™ã€‚

---

## English

This is a browser extension that automatically replaces hard-to-read Japanese fonts with **Noto Sans**. Performance optimized.

### Features

- âš¡ High-performance font preloading mechanism
- ğŸ”„ Automatic detection and replacement of multiple Japanese fonts
- ğŸ–¼ï¸ Support for dynamically added iframes
- ğŸ¨ Custom icons generated from SVG
- ğŸš€ Chrome Extension Manifest V3 compliant
- ğŸ’¾ Lightweight with subset fonts for fast loading

### Replaced Fonts

- MS Gothic / MS ã‚´ã‚·ãƒƒã‚¯
- MS PGothic / MS Pã‚´ã‚·ãƒƒã‚¯
- Meiryo / ãƒ¡ã‚¤ãƒªã‚ª
- Yu Gothic / æ¸¸ã‚´ã‚·ãƒƒã‚¯ (W1-W9 weights)
- Yu Gothic UI / Yu Gothic Medium
- Meiryo UI
- M PLUS Rounded 1c
- Malgun Gothic
- Arial Unicode MS / Arial / Helvetica
- Roboto / RobotoDraft
- Hiragino Kaku Gothic Pro / ProN (W1-W9 weights)
- Hiragino Sans / Sans Pro
- Segoe UI
- Inter
- And more... (45+ fonts total)

### Implementation Details

#### Core Technologies
- **Manifest V3 Compliant**: Uses native extension API
- **CSS Font Loading API**: Efficient asynchronous font loading
- **WeakSet-based Deduplication**: Prevents duplicate processing
- **DOM Batching**: Uses DocumentFragment for performance
- **Debounce Mechanism**: Optimizes handling of multiple iframes

#### Performance Features
- Preload at `document_start` for early initialization
- Local font fallback (Noto Sans JP, Noto Sans CJK)
- Automatic resource cleanup via requestIdleCallback
- Optimized CSS generation with dynamic weight variants

### License

MIT License - See [LICENSE](LICENSE) file for details.

Noto Sans JP fonts are licensed under the [SIL Open Font License 1.1](fonts/LICENSE).
